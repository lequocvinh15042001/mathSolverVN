{"ast":null,"code":"import * as uuid from 'uuid/v4';\nimport getDecorated from './decorate';\nimport { isPromise } from './tool';\n\nfunction getUploadPlaceholder(file, onImageUpload) {\n  var placeholder = getDecorated('', 'image', {\n    target: 'Uploading_' + uuid(),\n    imageUrl: ''\n  }).text;\n  var uploaded = new Promise(function (resolve) {\n    var isCallback = true;\n\n    var handleUploaded = function handleUploaded(url) {\n      if (isCallback) {\n        console.warn('Deprecated: onImageUpload should return a Promise, callback will be removed in future');\n      }\n\n      resolve(getDecorated('', 'image', {\n        target: file.name,\n        imageUrl: url\n      }).text);\n    }; // 兼容回调和Promise\n\n\n    var upload = onImageUpload(file, handleUploaded);\n\n    if (isPromise(upload)) {\n      isCallback = false;\n      upload.then(handleUploaded);\n    }\n  });\n  return {\n    placeholder: placeholder,\n    uploaded: uploaded\n  };\n}\n\nexport default getUploadPlaceholder;","map":{"version":3,"names":["uuid","getDecorated","isPromise","getUploadPlaceholder","file","onImageUpload","placeholder","target","imageUrl","text","uploaded","Promise","resolve","isCallback","handleUploaded","url","console","warn","name","upload","then"],"sources":["/Users/lequocvinh/MathSolver/mathSolverVN/node_modules/react-markdown-editor-lite/esm/utils/uploadPlaceholder.js"],"sourcesContent":["import * as uuid from 'uuid/v4';\nimport getDecorated from './decorate';\nimport { isPromise } from './tool';\n\nfunction getUploadPlaceholder(file, onImageUpload) {\n  var placeholder = getDecorated('', 'image', {\n    target: 'Uploading_' + uuid(),\n    imageUrl: ''\n  }).text;\n  var uploaded = new Promise(function (resolve) {\n    var isCallback = true;\n\n    var handleUploaded = function handleUploaded(url) {\n      if (isCallback) {\n        console.warn('Deprecated: onImageUpload should return a Promise, callback will be removed in future');\n      }\n\n      resolve(getDecorated('', 'image', {\n        target: file.name,\n        imageUrl: url\n      }).text);\n    }; // 兼容回调和Promise\n\n\n    var upload = onImageUpload(file, handleUploaded);\n\n    if (isPromise(upload)) {\n      isCallback = false;\n      upload.then(handleUploaded);\n    }\n  });\n  return {\n    placeholder: placeholder,\n    uploaded: uploaded\n  };\n}\n\nexport default getUploadPlaceholder;"],"mappings":"AAAA,OAAO,KAAKA,IAAZ,MAAsB,SAAtB;AACA,OAAOC,YAAP,MAAyB,YAAzB;AACA,SAASC,SAAT,QAA0B,QAA1B;;AAEA,SAASC,oBAAT,CAA8BC,IAA9B,EAAoCC,aAApC,EAAmD;EACjD,IAAIC,WAAW,GAAGL,YAAY,CAAC,EAAD,EAAK,OAAL,EAAc;IAC1CM,MAAM,EAAE,eAAeP,IAAI,EADe;IAE1CQ,QAAQ,EAAE;EAFgC,CAAd,CAAZ,CAGfC,IAHH;EAIA,IAAIC,QAAQ,GAAG,IAAIC,OAAJ,CAAY,UAAUC,OAAV,EAAmB;IAC5C,IAAIC,UAAU,GAAG,IAAjB;;IAEA,IAAIC,cAAc,GAAG,SAASA,cAAT,CAAwBC,GAAxB,EAA6B;MAChD,IAAIF,UAAJ,EAAgB;QACdG,OAAO,CAACC,IAAR,CAAa,uFAAb;MACD;;MAEDL,OAAO,CAACX,YAAY,CAAC,EAAD,EAAK,OAAL,EAAc;QAChCM,MAAM,EAAEH,IAAI,CAACc,IADmB;QAEhCV,QAAQ,EAAEO;MAFsB,CAAd,CAAZ,CAGLN,IAHI,CAAP;IAID,CATD,CAH4C,CAYzC;;;IAGH,IAAIU,MAAM,GAAGd,aAAa,CAACD,IAAD,EAAOU,cAAP,CAA1B;;IAEA,IAAIZ,SAAS,CAACiB,MAAD,CAAb,EAAuB;MACrBN,UAAU,GAAG,KAAb;MACAM,MAAM,CAACC,IAAP,CAAYN,cAAZ;IACD;EACF,CArBc,CAAf;EAsBA,OAAO;IACLR,WAAW,EAAEA,WADR;IAELI,QAAQ,EAAEA;EAFL,CAAP;AAID;;AAED,eAAeP,oBAAf"},"metadata":{},"sourceType":"module"}