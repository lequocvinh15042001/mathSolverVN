{"ast":null,"code":"var _jsxFileName = \"/Users/lequocvinh/MathSolver/mathSolverVN/src/container/Order/VnpayPaymentSuccess.js\",\n    _s = $RefreshSig$(),\n    _s2 = $RefreshSig$();\n\nimport React, { useEffect, useState } from 'react';\nimport { Link, NavLink, useHistory, useParams, useLocation } from 'react-router-dom';\nimport { paymentOrderVnpaySuccessService, confirmOrderVnpay } from '../../services/userService';\nimport './OrderHomePage.scss';\nimport { toast } from 'react-toastify';\nimport CommonUtils from '../../utils/CommonUtils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\n\nfunction useQuery() {\n  _s();\n\n  const {\n    search\n  } = useLocation();\n  return React.useMemo(() => new URLSearchParams(search), [search]);\n}\n\n_s(useQuery, \"I+9F+Vhfmc3otMLqUKFlYflxhf8=\", false, function () {\n  return [useLocation];\n});\n\nfunction VnpayPaymentSuccess(props) {\n  _s2();\n\n  let query = useQuery();\n  useEffect(() => {\n    let objectParam = {\n      vnp_Amount: query.get('vnp_Amount'),\n      vnp_BankCode: query.get('vnp_BankCode'),\n      vnp_BankTranNo: query.get('vnp_BankTranNo'),\n      vnp_CardType: query.get('vnp_CardType'),\n      vnp_OrderInfo: query.get('vnp_OrderInfo'),\n      vnp_PayDate: query.get('vnp_PayDate'),\n      vnp_ResponseCode: query.get('vnp_ResponseCode'),\n      vnp_TmnCode: query.get('vnp_TmnCode'),\n      vnp_TransactionNo: query.get('vnp_TransactionNo'),\n      vnp_TransactionStatus: query.get('vnp_TransactionStatus'),\n      vnp_TxnRef: query.get('vnp_TxnRef'),\n      vnp_SecureHash: query.get('vnp_SecureHash')\n    };\n\n    let confirm = async () => {\n      let orderData = JSON.parse(localStorage.getItem(\"orderData\"));\n      localStorage.removeItem(\"orderData\");\n\n      if (orderData) {\n        let res = await confirmOrderVnpay(objectParam);\n\n        if (res && res.errCode == 0) {\n          createNewOrder(orderData);\n        }\n      }\n    };\n\n    confirm();\n  }, []);\n\n  let createNewOrder = async data => {\n    let res = await paymentOrderVnpaySuccessService(data);\n\n    if (res && res.errCode == 0) {\n      toast.success(\"Thanh toán hóa đơn thành công\");\n      const userData = JSON.parse(localStorage.getItem('userData'));\n      setTimeout(() => {\n        window.location.href = '/user/order/' + userData.id;\n      }, 2000);\n    } else {\n      toast.error(res.errMessgae);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wrap-order\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"wrap-heading-order\",\n        children: [/*#__PURE__*/_jsxDEV(NavLink, {\n          to: \"/\",\n          className: \"navbar-brand logo_h\",\n          children: /*#__PURE__*/_jsxDEV(\"img\", {\n            src: \"/resources/img/logo.png\",\n            alt: \"\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 70,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 69,\n          columnNumber: 21\n        }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"Thanh To\\xE1n VNPAY\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 21\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 68,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"wrap-order-item\",\n        children: /*#__PURE__*/_jsxDEV(\"section\", {\n          className: \"cart_area\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"container\",\n            children: /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"cart_inner\",\n              children: /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"col-md-12\",\n                children: /*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"p-3 py-5\",\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"d-flex justify-content-between align-items-center mb-3\",\n                    children: /*#__PURE__*/_jsxDEV(\"h4\", {\n                      className: \"text-right\",\n                      children: \"Th\\xF4ng tin thanh to\\xE1n\"\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 82,\n                      columnNumber: 29\n                    }, this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 81,\n                    columnNumber: 25\n                  }, this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 80,\n                  columnNumber: 21\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 79,\n                columnNumber: 29\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 78,\n              columnNumber: 29\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 77,\n            columnNumber: 25\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 76,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      style: {\n        width: '100%',\n        height: '100px',\n        backgroundColor: '#f5f5f5'\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true);\n}\n\n_s2(VnpayPaymentSuccess, \"SCD2u/2Ws51YgbJhV3q6Zm3fxeM=\", false, function () {\n  return [useQuery];\n});\n\n_c = VnpayPaymentSuccess;\nexport default VnpayPaymentSuccess;\n\nvar _c;\n\n$RefreshReg$(_c, \"VnpayPaymentSuccess\");","map":{"version":3,"names":["React","useEffect","useState","Link","NavLink","useHistory","useParams","useLocation","paymentOrderVnpaySuccessService","confirmOrderVnpay","toast","CommonUtils","useQuery","search","useMemo","URLSearchParams","VnpayPaymentSuccess","props","query","objectParam","vnp_Amount","get","vnp_BankCode","vnp_BankTranNo","vnp_CardType","vnp_OrderInfo","vnp_PayDate","vnp_ResponseCode","vnp_TmnCode","vnp_TransactionNo","vnp_TransactionStatus","vnp_TxnRef","vnp_SecureHash","confirm","orderData","JSON","parse","localStorage","getItem","removeItem","res","errCode","createNewOrder","data","success","userData","setTimeout","window","location","href","id","error","errMessgae","width","height","backgroundColor"],"sources":["/Users/lequocvinh/MathSolver/mathSolverVN/src/container/Order/VnpayPaymentSuccess.js"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\nimport { Link, NavLink, useHistory, useParams,useLocation  } from 'react-router-dom';\r\n\r\nimport {\r\n    paymentOrderVnpaySuccessService,confirmOrderVnpay\r\n} from '../../services/userService';\r\nimport './OrderHomePage.scss';\r\n\r\nimport { toast } from 'react-toastify';\r\n\r\nimport CommonUtils from '../../utils/CommonUtils';\r\nfunction useQuery() {\r\n    const { search } = useLocation();\r\n  \r\n    return React.useMemo(() => new URLSearchParams(search), [search]);\r\n  }\r\nfunction VnpayPaymentSuccess(props) {\r\n    let query = useQuery();\r\n    useEffect(() => {\r\n        let objectParam = {\r\n            vnp_Amount:query.get('vnp_Amount'),\r\n            vnp_BankCode:query.get('vnp_BankCode'),\r\n            vnp_BankTranNo:query.get('vnp_BankTranNo'),\r\n            vnp_CardType:query.get('vnp_CardType'),\r\n            vnp_OrderInfo:query.get('vnp_OrderInfo'),\r\n            vnp_PayDate:query.get('vnp_PayDate'),\r\n            vnp_ResponseCode:query.get('vnp_ResponseCode'),\r\n            vnp_TmnCode:query.get('vnp_TmnCode'),\r\n            vnp_TransactionNo:query.get('vnp_TransactionNo'),\r\n            vnp_TransactionStatus:query.get('vnp_TransactionStatus'),\r\n            vnp_TxnRef:query.get('vnp_TxnRef'),\r\n            vnp_SecureHash:query.get('vnp_SecureHash')\r\n        \r\n        }\r\n        let confirm = async()=>{\r\n            let orderData =  JSON.parse(localStorage.getItem(\"orderData\"))\r\n            localStorage.removeItem(\"orderData\")\r\n          \r\n\r\n               \r\n                if(orderData){\r\n                    let res = await confirmOrderVnpay(objectParam)\r\n                    if(res && res.errCode == 0){\r\n\r\n                    createNewOrder(orderData)\r\n                }\r\n            }\r\n        }\r\n        confirm()\r\n    }, [])\r\n    let createNewOrder = async (data) =>{\r\n        let res = await paymentOrderVnpaySuccessService(data)\r\n        if(res && res.errCode ==0){\r\n            toast.success(\"Thanh toán hóa đơn thành công\")\r\n            const userData = JSON.parse(localStorage.getItem('userData'));\r\n            setTimeout(()=>{\r\n                window.location.href='/user/order/'+userData.id\r\n            },2000)\r\n        }else{\r\n            toast.error(res.errMessgae)\r\n        }\r\n    }\r\n    return (\r\n\r\n        <>\r\n\r\n            <div className=\"wrap-order\">\r\n                <div className=\"wrap-heading-order\">\r\n                    <NavLink to=\"/\" className=\"navbar-brand logo_h\">\r\n                        <img src=\"/resources/img/logo.png\" alt=\"\" />\r\n                    </NavLink>\r\n                    <span>Thanh Toán VNPAY</span>\r\n                </div>\r\n               \r\n                <div className=\"wrap-order-item\">\r\n                    <section className=\"cart_area\">\r\n                        <div className=\"container\">\r\n                            <div className=\"cart_inner\">\r\n                            <div className=\"col-md-12\">\r\n                    <div className=\"p-3 py-5\">\r\n                        <div className=\"d-flex justify-content-between align-items-center mb-3\">\r\n                            <h4 className=\"text-right\">Thông tin thanh toán</h4>\r\n                        </div>\r\n                       \r\n                       \r\n                        \r\n                    </div>\r\n                </div>\r\n                            </div>\r\n\r\n                            \r\n\r\n                        </div>\r\n\r\n\r\n                    </section>\r\n                </div>\r\n               \r\n             \r\n            </div>\r\n            <div style={{ width: '100%', height: '100px', backgroundColor: '#f5f5f5' }}></div>\r\n        </>\r\n\r\n    );\r\n}\r\n\r\nexport default VnpayPaymentSuccess;"],"mappings":"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"},"metadata":{},"sourceType":"module"}